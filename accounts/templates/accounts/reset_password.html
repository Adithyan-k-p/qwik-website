<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Password - Qwik</title>
    <link href="https://fonts.googleapis.com/css2?family=Grand+Hotel&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --bg-body: #F0F2F5; --bg-card: #FFFFFF; --text-main: #1c1e21; --text-secondary: #65676B;
            --accent-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --accent-solid: #667eea; --shadow-card: 0 8px 30px rgba(0,0,0,0.08);
            --input-bg: #F5F6F8; --error-color: #e74c3c;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Poppins', sans-serif; background-color: var(--bg-body); color: var(--text-main); min-height: 100vh; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; }

        .blob { position: absolute; border-radius: 50%; filter: blur(80px); z-index: -1; opacity: 0.6; }
        .blob-1 { width: 400px; height: 400px; background: #667eea; top: -100px; left: -100px; }
        .blob-2 { width: 300px; height: 300px; background: #764ba2; bottom: -50px; right: -50px; }

        .login-wrapper { width: 100%; max-width: 420px; padding: 20px; z-index: 10; }
        .login-card { background: var(--bg-card); border-radius: 20px; box-shadow: var(--shadow-card); padding: 40px 30px; text-align: center; }
        .brand-logo { font-family: 'Grand Hotel', cursive; font-size: 3rem; background: var(--accent-gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 5px; }
        .subtitle { color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 25px; }

        .form-group { margin-bottom: 18px; text-align: left; }
        .input-wrapper { position: relative; display: flex; align-items: center; }
        .icon-left { position: absolute; left: 15px; color: var(--text-secondary); }
        
        .form-input { width: 100%; padding: 14px 15px 14px 45px; border: 1px solid transparent; background-color: var(--input-bg); border-radius: 12px; font-size: 0.95rem; transition: 0.3s; }
        .form-input:focus { outline: none; background-color: #fff; border-color: var(--accent-solid); box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1); }

        /* Validation Checklist */
        .validation-box { text-align: left; margin-top: 10px; margin-bottom: 20px; padding: 10px; background: #f9f9f9; border-radius: 10px; }
        .v-item { font-size: 0.8rem; color: #999; display: flex; align-items: center; gap: 8px; margin-bottom: 4px; }
        .v-item.valid { color: #2ecc71; }
        .v-item.valid i:before { content: "\f00c"; } /* FontAwesome check icon */

        .login-btn { width: 100%; padding: 14px; border: none; border-radius: 50px; background: var(--accent-gradient); color: white; font-weight: 600; cursor: pointer; transition: 0.2s; opacity: 0.6; pointer-events: none; }
        .login-btn.active { opacity: 1; pointer-events: all; }

        .error-message { color: var(--error-color); background: rgba(231, 76, 60, 0.1); padding: 8px; border-radius: 8px; font-size: 0.8rem; margin-bottom: 15px; text-align: left; }
    </style>
</head>
<body>
    <div class="blob blob-1"></div>
    <div class="blob blob-2"></div>

    <div class="login-wrapper">
        <div class="login-card">
            <div class="brand-logo">Qwik</div>
            <p class="subtitle">Enter your new password for <b>{{ email }}</b></p>

            <form method="POST" id="resetForm">
                {% csrf_token %}

                {% if form.errors %}
                <div class="error-message">
                    {% for field, errors in form.errors.items %}{{ errors.0 }}{% endfor %}
                </div>
                {% endif %}

                <div class="form-group">
                    <div class="input-wrapper">
                        <i class="fa-solid fa-lock icon-left"></i>
                        {{ form.password }}
                    </div>
                </div>

                <div class="form-group">
                    <div class="input-wrapper">
                        <i class="fa-solid fa-check-double icon-left"></i>
                        {{ form.confirm_password }}
                    </div>
                </div>

                <!-- Live Validation List -->
                <div class="validation-box">
                    <div id="v-len" class="v-item"><i class="fa-solid fa-circle"></i> 8-32 Characters</div>
                    <div id="v-up" class="v-item"><i class="fa-solid fa-circle"></i> At least 1 Uppercase</div>
                    <div id="v-low" class="v-item"><i class="fa-solid fa-circle"></i> At least 1 Lowercase</div>
                    <div id="v-num" class="v-item"><i class="fa-solid fa-circle"></i> At least 1 Digit</div>
                    <div id="v-match" class="v-item"><i class="fa-solid fa-circle"></i> Passwords match</div>
                </div>

                <button type="submit" class="login-btn" id="submitBtn">Reset Password</button>
            </form>
        </div>
    </div>

    <script>
        const pass = document.getElementById('newPass');
        const confirm = document.getElementById('confirmPass');
        const submitBtn = document.getElementById('submitBtn');

        const vLen = document.getElementById('v-len');
        const vUp = document.getElementById('v-up');
        const vLow = document.getElementById('v-low');
        const vNum = document.getElementById('v-num');
        const vMatch = document.getElementById('v-match');

        function validate() {
            const val = pass.value;
            const confVal = confirm.value;

            const isLen = val.length >= 8 && val.length <= 32;
            const isUp = /[A-Z]/.test(val);
            const isLow = /[a-z]/.test(val);
            const isNum = /\d/.test(val);
            const isMatch = val === confVal && val !== "";

            // Toggle Classes
            vLen.classList.toggle('valid', isLen);
            vUp.classList.toggle('valid', isUp);
            vLow.classList.toggle('valid', isLow);
            vNum.classList.toggle('valid', isNum);
            vMatch.classList.toggle('valid', isMatch);

            // Enable button only if all valid
            if (isLen && isUp && isLow && isNum && isMatch) {
                submitBtn.classList.add('active');
            } else {
                submitBtn.classList.remove('active');
            }
        }

        pass.addEventListener('input', validate);
        confirm.addEventListener('input', validate);
    </script>
</body>
</html>