{% for report in reports %}
<tr>
    <td>
        {% if report.reported_user %}
            <span class="status-badge badge-blue">User Report</span>
        {% else %}
            <span class="status-badge badge-purple">Post Report</span>
        {% endif %}
    </td>
    <td>
        {% if report.reported_user %}
            <a href="{% url 'custom_admin:users_list' %}?q={{ report.reported_user.username }}" style="color: #4ecdc4; text-decoration: none;">
                <b>@{{ report.reported_user.username }}</b>
            </a>
        {% else %}
            <a href="{% url 'custom_admin:posts_list' %}?q={{ report.post.id }}" style="color: #4ecdc4; text-decoration: none;">
                <b>Post #{{ report.post.id }}</b><br>
                <span style="font-size: 0.8rem; color: #a3aed0;">by @{{ report.post.user.username }}</span>
            </a>
        {% endif %}
    </td>
    <td>
        <span style="font-size: 0.9rem;">{{ report.get_reason_display }}</span>
        {% if report.description %}
            <br><span style="font-size: 0.75rem; color: #888;">{{ report.description|truncatechars:30 }}</span>
        {% endif %}
    </td>
    <td>
        {% if report.status == 'pending' %}
            <span class="status-badge badge-red">Pending</span>
        {% elif report.status == 'reviewed' %}
            <span class="status-badge badge-yellow">Reviewed</span>
        {% elif report.status == 'resolved' %}
            <span class="status-badge badge-green">Resolved</span>
        {% else %}
            <span class="status-badge badge-gray">Dismissed</span>
        {% endif %}
    </td>
    <td style="font-size: 0.9rem; color: #a3aed0;">
        {{ report.created_at|date:"M d, Y" }}
    </td>
    <td>
        <div style="display: flex; gap: 8px; flex-wrap: wrap;">
            {% if report.reported_user %}
                <a href="{% url 'custom_admin:view_user_report' report.id %}" class="status-badge badge-blue" style="text-decoration: none; cursor: pointer;">
                    <i class="fa-regular fa-eye"></i>
                </a>
            {% else %}
                <a href="{% url 'custom_admin:view_post_report' report.id %}" class="status-badge badge-blue" style="text-decoration: none; cursor: pointer;">
                    <i class="fa-regular fa-eye"></i>
                </a>
            {% endif %}
            
            <!-- Status Update Dropdown -->
            <form method="POST" action="{% if report.reported_user %}{% url 'custom_admin:update_report_status' 'user' report.id %}{% else %}{% url 'custom_admin:update_report_status' 'post' report.id %}{% endif %}" style="display: inline;">
                {% csrf_token %}
                <select name="status" onchange="this.form.submit()" class="custom-select" style="padding: 5px; font-size: 0.85rem;">
                    <option value="">Change Status</option>
                    <option value="pending" {% if report.status == 'pending' %}selected{% endif %}>Pending</option>
                    <option value="reviewed" {% if report.status == 'reviewed' %}selected{% endif %}>Reviewed</option>
                    <option value="resolved" {% if report.status == 'resolved' %}selected{% endif %}>Resolved</option>
                    <option value="dismissed" {% if report.status == 'dismissed' %}selected{% endif %}>Dismissed</option>
                </select>
            </form>
        </div>
    </td>
</tr>
{% empty %}
<tr><td colspan="6" style="text-align:center; padding: 40px;">No reports found.</td></tr>
{% endfor %}
